import{L as C}from"./Layout-BGNV5PTI.js";import{r as g,o as N,q as L,a_ as M,G as V,H as o,aZ as E,ay as l,y as I,P as t,u as _,z as i,L as s,M as n}from"./vendor_vue-DcrwGJHO.js";import{g as R}from"./book-CtD6eXrW.js";import{E as d,a as S}from"./vendor_element-BfRFdgV9.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-xceKWyYj.js";import"./vendor_misc-BnRtHUQB.js";const j={class:"card-header"},q={class:"book-cover-placeholder"},z={class:"image-slot"},G={style:{"margin-top":"20px","text-align":"right"}},H={__name:"BookDetail",setup(P){const p=M(),m=E(),a=g({}),c=g(!1);N(()=>p.params.id,(u,e)=>{u!==e&&f(u)},{immediate:!0}),L(async()=>{await f(p.params.id)});async function f(u){if(!u){d.error("无效的图书ID");return}c.value=!0;try{const e=await R(u);console.log("[BookDetail] getBook response:",e),e&&e.code===0?(a.value=e.data||{},console.log("[BookDetail] Book object after setting:",a.value)):d.error((e==null?void 0:e.message)||"获取图书详情失败")}catch(e){console.error("获取图书详情失败:",e),d.error("获取图书详情失败: "+(e.message||e))}finally{c.value=!1}}return(u,e)=>{const b=l("el-page-header"),r=l("el-descriptions-item"),k=l("el-descriptions"),v=l("el-col"),B=l("el-icon"),y=l("el-image"),h=l("el-row"),x=l("el-button"),w=l("el-card"),D=l("el-skeleton");return I(),V(C,null,{default:o(()=>[t(D,{loading:c.value,animated:"",rows:10},{default:o(()=>[t(b,{onBack:e[0]||(e[0]=()=>_(m).go(-1))},{content:o(()=>[...e[2]||(e[2]=[i("span",null,"图书详情",-1)])]),_:1}),t(w,{style:{"margin-top":"20px"}},{header:o(()=>[i("div",j,[i("span",null,n(a.value.title||"加载中..."),1)])]),default:o(()=>[t(h,{gutter:20},{default:o(()=>[t(v,{span:24,md:16},{default:o(()=>[t(k,{column:1,border:""},{default:o(()=>[t(r,{label:"书名"},{default:o(()=>[s(n(a.value.title||"-"),1)]),_:1}),t(r,{label:"作者"},{default:o(()=>[s(n(a.value.author||"-"),1)]),_:1}),t(r,{label:"ISBN"},{default:o(()=>[s(n(a.value.isbn||"-"),1)]),_:1}),t(r,{label:"出版社"},{default:o(()=>[s(n(a.value.publisher||"-"),1)]),_:1}),t(r,{label:"出版日期"},{default:o(()=>[s(n(a.value.publishDate||"-"),1)]),_:1}),t(r,{label:"分类"},{default:o(()=>[s(n(a.value.category||"-"),1)]),_:1}),t(r,{label:"位置"},{default:o(()=>[s(n(a.value.location||"-"),1)]),_:1}),t(r,{label:"总册数"},{default:o(()=>[s(n(a.value.totalCopies||0),1)]),_:1}),t(r,{label:"在馆数"},{default:o(()=>[s(n(a.value.availableCopies||0),1)]),_:1})]),_:1})]),_:1}),t(v,{span:24,md:8,style:{"text-align":"center"}},{default:o(()=>[i("div",q,[t(y,{src:a.value.cover||"",fit:"contain","preview-src-list":[a.value.cover||""],"hide-on-click-modal":""},{error:o(()=>[i("div",z,[t(B,null,{default:o(()=>[t(_(S))]),_:1}),e[3]||(e[3]=i("p",null,"暂无封面",-1))])]),_:1},8,["src","preview-src-list"])])]),_:1})]),_:1}),i("div",G,[t(x,{onClick:e[1]||(e[1]=T=>_(m).push(`/books/${a.value.id}/edit`))},{default:o(()=>[...e[4]||(e[4]=[s("编辑",-1)])]),_:1})])]),_:1})]),_:1},8,["loading"])]),_:1})}}},U=$(H,[["__scopeId","data-v-ad1e2577"]]);export{U as default};
