import{r,q as N,G as x,H as o,ay as t,y as T,P as e,z as w,X as B,L as D}from"./vendor_vue-DcrwGJHO.js";import{L as S}from"./Layout-BGNV5PTI.js";import{D as L}from"./DataTable-BPSVB8sg.js";import{b as M}from"./statistics-AZdWBwl5.js";import{E as h}from"./vendor_element-BfRFdgV9.js";import"./index-xceKWyYj.js";import"./vendor_misc-BnRtHUQB.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={__name:"OverdueRecords",setup(O){const p=r({readerName:"",bookTitle:""}),g=r([]),i=r(!1),s=r(1),v=r(0),c=r(10);N(()=>{d()});async function d(){i.value=!0;try{const l={page:s.value,size:c.value},a=await M(l);if(a&&a.code===0){const m=a.data||{},u=m.items||[];g.value=u,v.value=m.total||u.length||0}else h.error((a==null?void 0:a.message)||"获取逾期记录失败")}catch(l){h.error("获取逾期记录失败: "+(l.message||l))}finally{i.value=!1}}function b(){s.value=1,d()}function V(l){s.value=l,d()}function k(l){c.value=l,s.value=1,d()}return(l,a)=>{const m=t("el-page-header"),u=t("el-input"),_=t("el-form-item"),z=t("el-button"),C=t("el-form"),y=t("el-card"),n=t("el-table-column");return T(),x(S,null,{default:o(()=>[e(m,null,{content:o(()=>[...a[2]||(a[2]=[w("span",null,"逾期记录",-1)])]),_:1}),e(y,{style:{"margin-top":"20px"}},{default:o(()=>[e(C,{inline:!0,onSubmit:B(b,["prevent"])},{default:o(()=>[e(_,{label:"读者姓名"},{default:o(()=>[e(u,{modelValue:p.value.readerName,"onUpdate:modelValue":a[0]||(a[0]=f=>p.value.readerName=f),placeholder:"请输入读者姓名"},null,8,["modelValue"])]),_:1}),e(_,{label:"图书名称"},{default:o(()=>[e(u,{modelValue:p.value.bookTitle,"onUpdate:modelValue":a[1]||(a[1]=f=>p.value.bookTitle=f),placeholder:"请输入图书名称"},null,8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(z,{type:"primary",onClick:b},{default:o(()=>[...a[3]||(a[3]=[D("查询",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,{style:{"margin-top":"20px"}},{default:o(()=>[e(L,{data:g.value,loading:i.value,total:v.value,page:s.value,"page-size":c.value,onPageChange:V,onSizeChange:k},{columns:o(()=>[e(n,{prop:"borrowId",label:"借阅编号"}),e(n,{prop:"bookTitle",label:"书名"}),e(n,{prop:"readerName",label:"读者姓名"}),e(n,{prop:"dueDate",label:"应还日期"}),e(n,{prop:"overdueDays",label:"逾期天数"}),e(n,{prop:"category",label:"分类"})]),_:1},8,["data","loading","total","page","page-size"])]),_:1})]),_:1})}}};export{I as default};
