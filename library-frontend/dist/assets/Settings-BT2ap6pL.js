import{L}from"./Layout-BGNV5PTI.js";import{u as T}from"./index-xceKWyYj.js";import{g as j,h as q,c as z,s as A,u as G,j as H,E as m}from"./vendor_element-BfRFdgV9.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as c,q as O,G as K,H as s,ay as a,y as Q,P as l,z as t,u as i,L as n,M as P}from"./vendor_vue-DcrwGJHO.js";import"./vendor_misc-BnRtHUQB.js";const R={class:"card-header"},W={class:"rules-container"},X={class:"rule-item"},Y={class:"rule-icon"},Z={class:"rule-content"},$={class:"rule-value"},h={class:"rule-item"},ee={class:"rule-icon"},le={class:"rule-content"},se={class:"rule-value"},te={class:"rule-item"},oe={class:"rule-icon"},ae={class:"rule-content"},ne={class:"rule-value"},de={class:"rules-notice"},re={class:"card-header"},ue={class:"card-header"},ie={__name:"Settings",setup(_e){const y=c("basic"),p=c({defaultBorrowDays:30,dailyFine:.5,defaultMaxBorrow:5}),o=c({username:"",oldPassword:"",newPassword:"",confirmPassword:""}),V=c(!0),x=T();O(()=>{setTimeout(()=>{B(),S(),V.value=!1},300)});function S(){x.user?o.value.username=x.user.username||"admin":o.value.username="admin"}function B(){const v=localStorage.getItem("librarySystemSettings");if(v)try{p.value=JSON.parse(v)}catch(e){console.error("Failed to parse settings",e)}}function U(){if(!o.value.oldPassword){m.error("请输入原密码");return}if(!o.value.newPassword){m.error("请输入新密码");return}if(o.value.newPassword!==o.value.confirmPassword){m.error("两次输入的新密码不一致");return}if(o.value.newPassword.length<6){m.error("新密码长度不能少于6位");return}m.success("密码修改成功"),o.value.oldPassword="",o.value.newPassword="",o.value.confirmPassword=""}return(v,e)=>{const k=a("el-page-header"),r=a("el-icon"),w=a("el-col"),M=a("el-row"),N=a("el-alert"),g=a("el-card"),b=a("el-tab-pane"),f=a("el-input"),_=a("el-form-item"),C=a("el-button"),D=a("el-form"),u=a("el-descriptions-item"),E=a("el-descriptions"),F=a("el-tabs"),I=a("el-skeleton");return Q(),K(L,null,{default:s(()=>[l(I,{loading:V.value,animated:"",rows:8},{default:s(()=>[l(k,null,{content:s(()=>[...e[5]||(e[5]=[t("span",null,"系统设置",-1)])]),_:1}),l(F,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=d=>y.value=d),style:{"margin-top":"20px"}},{default:s(()=>[l(b,{label:"基本设置",name:"basic"},{default:s(()=>[l(g,{class:"setting-card"},{header:s(()=>[t("div",R,[l(r,null,{default:s(()=>[l(i(A))]),_:1}),e[6]||(e[6]=n(" 图书馆规则设置 ",-1))])]),default:s(()=>[t("div",W,[l(M,{gutter:20},{default:s(()=>[l(w,{span:24,md:8},{default:s(()=>[t("div",X,[t("div",Y,[l(r,{class:"rule-icon-inner"},{default:s(()=>[l(i(j))]),_:1})]),t("div",Z,[e[8]||(e[8]=t("div",{class:"rule-label"},"默认借阅期限",-1)),t("div",$,[n(P(p.value.defaultBorrowDays)+" ",1),e[7]||(e[7]=t("span",{class:"rule-unit"},"天",-1))])])])]),_:1}),l(w,{span:24,md:8},{default:s(()=>[t("div",h,[t("div",ee,[l(r,{class:"rule-icon-inner"},{default:s(()=>[l(i(q))]),_:1})]),t("div",le,[e[10]||(e[10]=t("div",{class:"rule-label"},"每日罚款金额",-1)),t("div",se,[n(P(p.value.dailyFine)+" ",1),e[9]||(e[9]=t("span",{class:"rule-unit"},"元/天",-1))])])])]),_:1}),l(w,{span:24,md:8},{default:s(()=>[t("div",te,[t("div",oe,[l(r,{class:"rule-icon-inner"},{default:s(()=>[l(i(z))]),_:1})]),t("div",ae,[e[12]||(e[12]=t("div",{class:"rule-label"},"默认最大借书数",-1)),t("div",ne,[n(P(p.value.defaultMaxBorrow)+" ",1),e[11]||(e[11]=t("span",{class:"rule-unit"},"本",-1))])])])]),_:1})]),_:1}),t("div",de,[l(N,{title:"注意：以上规则为系统默认设置，如需修改请联系系统管理员",type:"info","show-icon":"",closable:!1})])])]),_:1})]),_:1}),l(b,{label:"个人设置",name:"personal"},{default:s(()=>[l(g,{class:"setting-card"},{header:s(()=>[t("div",re,[l(r,null,{default:s(()=>[l(i(G))]),_:1}),e[13]||(e[13]=n(" 管理员账户设置 ",-1))])]),default:s(()=>[l(D,{model:o.value,"label-width":"120px",class:"settings-form"},{default:s(()=>[l(_,{label:"当前用户名"},{default:s(()=>[l(f,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>o.value.username=d),disabled:"",class:"setting-input"},null,8,["modelValue"])]),_:1}),l(_,{label:"原密码",prop:"oldPassword"},{default:s(()=>[l(f,{modelValue:o.value.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=d=>o.value.oldPassword=d),type:"password","show-password":"",class:"setting-input",placeholder:"请输入当前密码"},null,8,["modelValue"])]),_:1}),l(_,{label:"新密码",prop:"newPassword"},{default:s(()=>[l(f,{modelValue:o.value.newPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>o.value.newPassword=d),type:"password","show-password":"",class:"setting-input",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(_,{label:"确认新密码",prop:"confirmPassword"},{default:s(()=>[l(f,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=d=>o.value.confirmPassword=d),type:"password","show-password":"",class:"setting-input",placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1}),l(_,null,{default:s(()=>[l(C,{type:"primary",onClick:U},{default:s(()=>[...e[14]||(e[14]=[n("修改密码",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),l(b,{label:"系统信息",name:"info"},{default:s(()=>[l(g,{class:"setting-card"},{header:s(()=>[t("div",ue,[l(r,null,{default:s(()=>[l(i(H))]),_:1}),e[15]||(e[15]=n(" 系统基本信息 ",-1))])]),default:s(()=>[l(E,{column:1,class:"info-table"},{default:s(()=>[l(u,{label:"系统名称"},{default:s(()=>[...e[16]||(e[16]=[t("strong",null,"图书借还管理系统",-1)])]),_:1}),l(u,{label:"系统版本"},{default:s(()=>[...e[17]||(e[17]=[n("v1.0.0",-1)])]),_:1}),l(u,{label:"Vue版本"},{default:s(()=>[...e[18]||(e[18]=[n("3.x",-1)])]),_:1}),l(u,{label:"Element Plus版本"},{default:s(()=>[...e[19]||(e[19]=[n("2.x",-1)])]),_:1}),l(u,{label:"开发者"},{default:s(()=>[...e[20]||(e[20]=[n("图书馆技术部",-1)])]),_:1}),l(u,{label:"最后更新"},{default:s(()=>[...e[21]||(e[21]=[n("2023-01-01",-1)])]),_:1})]),_:1}),e[22]||(e[22]=t("div",{style:{"margin-top":"20px"}},[t("p",null,[t("strong",null,"系统描述:")]),t("p",{class:"system-description"}," 本系统用于管理图书馆书籍借阅、归还及相关统计工作，提供便捷高效的图书管理服务。 ")],-1))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["loading"])]),_:1})}}},ge=J(ie,[["__scopeId","data-v-a414befb"]]);export{ge as default};
